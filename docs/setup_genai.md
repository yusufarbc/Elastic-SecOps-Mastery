# Deployment Guide

Follow these steps to deploy the **Elastic-GenAI-SOC** components completely.

## Phase 1: Environment Setup

### 1. Install Python
Ensure Python 3.10 or higher is installed on your Windows machine.
- Download: [Python.org](https://www.python.org/downloads/windows/)
- **Important**: Check "Add Python to PATH" during installation.

### 2. Clone & Prepare
Open PowerShell as **Administrator**:
```powershell
git clone https://github.com/kullaniciadi/Elastic-GenAI-SOC.git
cd Elastic-GenAI-SOC
python -m venv venv
.\venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

---

## Phase 2: Run the MCP Server

### Option A: Temporary (Testing)
Simply run the script in your terminal.
```powershell
python src/server.py
```
Test it by opening a browser to `http://localhost:8000/docs` (if FastMCP provides Swagger) or verifying the console output.

### Option B: Permanent Service (Recommended)
To keep the server running even after you close the terminal or reboot:

**Method 1: Task Scheduler (Native)**
1.  Open **Task Scheduler**.
2.  Click **Create Task**.
3.  **General Tab**:
    *   Name: `ElasticSOC_MCP_Server`
    *   Check **"Run with highest privileges"**.
    *   Check **"Run whether user is logged on or not"**.
4.  **Triggers Tab**:
    *   New... -> **At Startup**.
5.  **Actions Tab**:
    *   New... -> **Start a program**.
    *   Program/script: `C:\Path\To\Repo\venv\Scripts\python.exe`
    *   Add arguments: `C:\Path\To\Repo\src\server.py`
    *   Start in: `C:\Path\To\Repo\`
6.  Save and enter your password.

---

## Phase 3: Connect your LLM

You need an MCP Client to talk to this server.

### using Claude Desktop (Example)
If you use the Claude Desktop app, add this to your `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "windows-defender": {
      "command": "C:\\Path\\To\\Repo\\venv\\Scripts\\python.exe",
      "args": [
        "C:\\Path\\To\\Repo\\src\\server.py"
      ]
    }
  }
}
```
*Note: Since standard input/output (stdio) is the default for many MCP clients, you might need to adjust `server.py` to use `stdio` transport instead of HTTP (FastAPI) if your client requires it. The current implementation uses FastAPI (HTTP).*

**If your client requires HTTP (SSE):**
- Configure your client to connect to `http://localhost:8000/sse` (depending on FastMCP default routes).

---


---

## Phase 5: Advanced Telemetry (Optional but Recommended)

To transform your endpoint into a true sensor for the SOC, you should install **Sysmon**.
This provides detailed logs about Process Creation, Network Connections, and DNS Queries (Event ID 22).

### Automatic Install
Run the helper script as Administrator:
```powershell
.\scripts\install_sysmon.ps1
```

### Verification
1.  Open **Event Viewer**.
2.  Navigate to `Applications and Services Logs` > `Microsoft` > `Windows` > `Sysmon` > `Operational`.
3.  You should see events generated by your activity.

